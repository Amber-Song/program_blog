<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="../program_blog.css" />
  </head>

  <body>
    <div class="web-page">
      <!-- This is title -->
      <p class="title">
        amber$ cd <a href="../Program_main.html" class="codestyle">main</a>/<a
          href="../Program_js.html"
          class="codestyle"
          >JavaScript</a
        >/<a href="./Program_js_json.html" class="codestyle"
          >\[JS\]\ JSON\ nested\ array\ and\ object.html</a
        >
      </p>
      <h1>[JS] JSON nested array and object</h1>

      <div class="info">
        To create a JSON file for my food blog, there is something I want it to
        include:
        <ul>
          <li>Save all the restaurants from one city or town in a file.</li>
          <li>
            Inside the city or town, there will be one or more restaurants.
          </li>
          <li>Inside the restaurant, there will be one or more dish.</li>
          <li>
            Inside the dish, there will be some information about the dish, like
            the name, price, etc.
          </li>
        </ul>
        So the city or town name, restaurant and dish will be either object or
        array. <br />
        At first, I chose the place variable to become an object, restaurant to
        become an array, the dish information to become an object. I thought I
        could loop the restaurant name inside the city or town name, then get
        the index in the object, loop through that or the restaurant name to get
        dish information. Here is the code for array and how I accessed data:
      </div>

      <!-- This is the container title for the code and result -->
      <div class="title-for-container">Code:</div>
      <div class="title-for-container">Result:</div>
      <!-- This is code on the left -->
      <div class="code-container">
        <div class="pre-code" id="pre-code"></div>
        <textarea cols="30" rows="48" disabled>
let dudRestaurant = { 
    "Morning Magpie": [ 
        { 
            Name: "Ice coffee", 
            Contain: "coffee, milk, cream, ice cream", 
            Price: "$7", 
            V: "Vegetarian Friendly"
        } 
    ], 
    "Union Co Cafe": [ 
        { 
            Name: "Mochaccino", 
            Contain: "Coffee, Hot chocolate, Milk", 
            Price: "$?", 
            V: "Vegetarian Friendly",
        }, 
        { 
            Name: "Panforte and Long black", 
            Contain: "You may want to ask", 
            Price: "$? &amp; $?", 
            V: "Vegetarian Friendly", 
        } 
    ] 
}

let wrongText = "";
let rightText = "";
for (restaurant in dudRestaurant) {
    wrongText += "<h3>" + restaurant + "</h3>";
    rightText += "<h3>" + restaurant + "</h3>";
    // This is the wrong demo
    for (dishId in restaurant) {
        wrongText +=
        restaurant[dishId].Name +
        " is " +
        restaurant[dishId].Price +
        "<br/>";
    }
    // This is the right demo
    for (dishId in dudRestaurant[restaurant]) {
        rightText +=
        dudRestaurant[restaurant][dishId].Name +
        " is " +
        dudRestaurant[restaurant][dishId].Price +
        "<br/>";
    }
}
        </textarea>
      </div>

      <!-- This is result on the right -->
      <div class="result-container">
        <iframe
          width="100%"
          height="100%"
          frameborder="0"
          sandbox="allow-scripts"
          name="iframeResult"
          allowfullscreen="true"
          src="./Program_js_json_demo.html"
        >
        </iframe>
      </div>

      <div class="info">
        It turned out that it doesn't work. There is no error in the console,
        but all the data inside the restaurant I try to access is undefined.
        Because I looped through the restaurant in the Dunedin restaurants and
        successfully got the name or to say the key instead of the key-value
        pair. I can't access the value or to say the dish information just by
        looping through the key. I should change <br />
        line 32 for (dishId in restaurant) { <br />
        to for (dishId in dudRestaurant[restaurant]) { <br />
        There is another way to access the value by doing for (dishId in
        dudRestaurant.restaurant), but as dudRestaurant.restaurant is equal to
        dudRestaurant["restaurant"], in this case, the restaurant is not a key
        name, it showed nothing.
      </div>
      <script>
        window.onload = function() {
          let text = "";
          // TODO: change the i < max to how many lines in the code
          for (let i = 1; i < 49; i++) {
            text += i + "<br/>";
          }
          document.getElementById("pre-code").innerHTML = text;
        };
      </script>
    </div>
  </body>
</html>
